{% extends "base-portugal.html" %}

{% block title %}Alertas - AgroTech Portugal{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
    <!-- Cabeçalho da Página -->
    <div class="page-header flex flex-col md:flex-row md:items-center justify-between mb-8">
        <div>
            <h1 class="h1-portugal flex items-center">
                <i class="fas fa-bell text-dourado-tradicional mr-4"></i>
                Alertas Agrícolas
            </h1>
            <p class="text-gray-600 mt-2">
                Notificações e recomendações personalizadas para a sua exploração
            </p>
        </div>
        <div class="mt-4 md:mt-0">
            <button type="button" class="btn-primary-pt">
                <i class="fas fa-cog mr-2"></i>
                Configurar Alertas
            </button>
        </div>
    </div>

    <!-- Filtros -->
    <div class="card-portugal mb-8">
        <div class="card-header-pt">
            <h2 class="h4-portugal">Filtrar Alertas</h2>
        </div>
        <div class="card-body-pt">
            <div class="flex flex-wrap gap-3">
                <button class="btn-filter active">
                    <i class="fas fa-list-ul mr-2"></i>
                    Todos os alertas
                </button>
                <button class="btn-filter">
                    <i class="fas fa-seedling mr-2"></i>
                    Culturas
                </button>
                <button class="btn-filter">
                    <i class="fas fa-cloud-sun-rain mr-2"></i>
                    Clima
                </button>
                <button class="btn-filter">
                    <i class="fas fa-tasks mr-2"></i>
                    Tarefas
                </button>
                <button class="btn-filter">
                    <i class="fas fa-euro-sign mr-2"></i>
                    Financeiros
                </button>
                <button class="btn-filter">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    Urgentes
                </button>
            </div>
        </div>
    </div>

    <!-- Lista de Alertas -->
    <div class="alerts-container space-y-6">
        <!-- Alertas de hoje -->
        <div class="alerts-section">
            <h2 class="alerts-date-header">
                <i class="fas fa-calendar-day text-azul-oceano mr-2"></i>
                Hoje, 10 de Agosto
            </h2>
            
            <div class="space-y-4 mt-4">
                <!-- Exemplo de alertas - substituir por loop de alertas reais -->
                <div class="alert-card-pt priority-high">
                    <div class="alert-icon">
                        <i class="fas fa-thermometer-full"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3 class="alert-title">Temperaturas Elevadas</h3>
                            <span class="alert-badge urgent">Urgente</span>
                        </div>
                        <div class="alert-message">
                            <p>Previsão de temperatura acima de 30°C nos próximos 3 dias. Recomenda-se aumentar a frequência de rega nas culturas de hortícolas para evitar stress hídrico.</p>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-time">Hoje, 09:15</span>
                            <div class="alert-actions">
                                <button class="btn-text">Marcar como lido</button>
                                <button class="btn-text-primary">Ver Detalhes</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert-card-pt priority-medium">
                    <div class="alert-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3 class="alert-title">Oportunidade de Plantio - Agosto</h3>
                            <span class="alert-badge recommendation">Recomendação</span>
                        </div>
                        <div class="alert-message">
                            <p>Este é o mês ideal para plantar: Cenoura, Couve, Espinafre, Alface e Feijão-verde. Aproveite as condições favoráveis para começar novas culturas!</p>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-time">Hoje, 08:30</span>
                            <div class="alert-actions">
                                <button class="btn-text">Marcar como lido</button>
                                <button class="btn-text-primary">Ver Calendário</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Alertas de ontem -->
        <div class="alerts-section">
            <h2 class="alerts-date-header">
                <i class="fas fa-calendar-alt text-azul-oceano mr-2"></i>
                Ontem, 9 de Agosto
            </h2>
            
            <div class="space-y-4 mt-4">
                <div class="alert-card-pt priority-low">
                    <div class="alert-icon">
                        <i class="fas fa-euro-sign"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3 class="alert-title">Abertura de Candidaturas PAC</h3>
                            <span class="alert-badge info">Informação</span>
                        </div>
                        <div class="alert-message">
                            <p>Abriram hoje as candidaturas para apoios do Programa de Desenvolvimento Rural (PDR 2023). Prazo até 15 de Setembro.</p>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-time">Ontem, 14:45</span>
                            <div class="alert-actions">
                                <button class="btn-text">Marcar como lido</button>
                                <button class="btn-text-primary">Saber Mais</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert-card-pt priority-medium read">
                    <div class="alert-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3 class="alert-title">Eficiência de Rega</h3>
                            <span class="alert-badge recommendation">Recomendação</span>
                        </div>
                        <div class="alert-message">
                            <p>Devido à seca moderada na região, recomendamos verificar a eficiência do seu sistema de rega e considerar a implementação de tecnologias de poupança de água.</p>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-time">Ontem, 10:20</span>
                            <div class="alert-actions">
                                <button class="btn-text">Remover</button>
                                <button class="btn-text-primary">Ver Dicas</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Alertas da semana passada -->
        <div class="alerts-section">
            <h2 class="alerts-date-header">
                <i class="fas fa-calendar-week text-azul-oceano mr-2"></i>
                Semana Passada
            </h2>
            
            <div class="space-y-4 mt-4">
                <div class="alert-card-pt priority-low read">
                    <div class="alert-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3 class="alert-title">Manutenção de Equipamentos</h3>
                            <span class="alert-badge task">Tarefa</span>
                        </div>
                        <div class="alert-message">
                            <p>É hora de verificar e fazer a manutenção dos seus equipamentos agrícolas para garantir o melhor desempenho durante as colheitas de outono.</p>
                        </div>
                        <div class="alert-footer">
                            <span class="alert-time">05/08, 09:30</span>
                            <div class="alert-actions">
                                <button class="btn-text">Remover</button>
                                <button class="btn-text-primary">Concluído</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Paginação -->
    <div class="pagination-container mt-8 flex justify-center">
        <nav class="pagination-portugal" aria-label="Paginação">
            <ul class="pagination-list">
                <li>
                    <a href="#" class="pagination-link disabled" aria-label="Anterior">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                </li>
                <li>
                    <a href="#" class="pagination-link active" aria-current="page">1</a>
                </li>
                <li>
                    <a href="#" class="pagination-link">2</a>
                </li>
                <li>
                    <a href="#" class="pagination-link">3</a>
                </li>
                <li>
                    <span class="pagination-ellipsis">…</span>
                </li>
                <li>
                    <a href="#" class="pagination-link">8</a>
                </li>
                <li>
                    <a href="#" class="pagination-link" aria-label="Próximo">
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('🇵🇹 Alertas AgroTech Portugal carregado');
    
    // Toggle de filtros
    const filterButtons = document.querySelectorAll('.btn-filter');
    filterButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            filterButtons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Aqui implementaria a filtragem real dos alertas
            console.log('Filtro selecionado:', this.textContent.trim());
        });
    });
    
    // Animação de entrada para alertas
    const alertCards = document.querySelectorAll('.alert-card-pt');
    alertCards.forEach((card, index) => {
        setTimeout(() => {
            card.style.opacity = '0';
            card.style.transform = 'translateX(-20px)';
            card.style.transition = 'all 0.4s ease';
            
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateX(0)';
            }, 100);
        }, index * 150);
    });
    
    // Marcar como lido
    document.querySelectorAll('.btn-text').forEach(btn => {
        if (btn.textContent.trim() === 'Marcar como lido') {
            btn.addEventListener('click', function() {
                const card = this.closest('.alert-card-pt');
                card.classList.add('read');
                this.textContent = 'Remover';
            });
        } else if (btn.textContent.trim() === 'Remover') {
            btn.addEventListener('click', function() {
                const card = this.closest('.alert-card-pt');
                card.style.opacity = '0';
                card.style.height = card.offsetHeight + 'px';
                card.style.marginTop = '0';
                card.style.marginBottom = '0';
                card.style.padding = '0';
                setTimeout(() => {
                    card.style.height = '0';
                    card.style.overflow = 'hidden';
                    setTimeout(() => {
                        card.remove();
                    }, 300);
                }, 300);
            });
        }
    });
});
</script>
{% endblock %}

<style>
/* Estilos específicos para a página de alertas */
.btn-filter {
    @apply px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 font-medium transition-colors;
}

.btn-filter.active {
    @apply bg-verde-agricultura text-white;
}

.alerts-date-header {
    @apply text-lg font-medium text-gray-700 pb-2 border-b border-gray-200;
}

.alert-card-pt {
    @apply bg-white rounded-lg shadow-sm border-l-4 flex p-4;
    border-color: var(--azul-oceano);
}

.alert-card-pt.priority-high {
    border-color: var(--vermelho-vinho);
}

.alert-card-pt.priority-medium {
    border-color: var(--dourado-tradicional);
}

.alert-card-pt.priority-low {
    border-color: var(--azul-oceano);
}

.alert-card-pt.read {
    @apply bg-gray-50;
    opacity: 0.8;
}

.alert-icon {
    @apply flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center mr-4 text-white text-xl;
    background: var(--azul-oceano);
}

.priority-high .alert-icon {
    background: var(--vermelho-vinho);
}

.priority-medium .alert-icon {
    background: var(--dourado-tradicional);
}

.alert-content {
    @apply flex-grow;
}

.alert-header {
    @apply flex justify-between items-center mb-2;
}

.alert-title {
    @apply text-lg font-medium;
}

.alert-badge {
    @apply px-2 py-1 rounded-full text-xs font-medium;
}

.alert-badge.urgent {
    @apply bg-red-100 text-red-800;
}

.alert-badge.recommendation {
    @apply bg-green-100 text-green-800;
}

.alert-badge.info {
    @apply bg-blue-100 text-blue-800;
}

.alert-badge.task {
    @apply bg-yellow-100 text-yellow-800;
}

.alert-message {
    @apply text-gray-700 mb-3;
}

.alert-footer {
    @apply flex justify-between items-center text-sm;
}

.alert-time {
    @apply text-gray-500;
}

.alert-actions {
    @apply flex gap-4;
}

.btn-text {
    @apply text-gray-600 hover:text-gray-900;
}

.btn-text-primary {
    @apply text-verde-agricultura hover:text-verde-agricultura-dark font-medium;
}

/* Paginação */
.pagination-portugal {
    @apply inline-flex shadow-sm rounded-md overflow-hidden;
}

.pagination-list {
    @apply flex;
}

.pagination-link {
    @apply px-4 py-2 border border-gray-300 text-gray-700 bg-white hover:bg-gray-50;
}

.pagination-link.active {
    @apply bg-verde-agricultura border-verde-agricultura text-white;
}

.pagination-link.disabled {
    @apply text-gray-400 pointer-events-none;
}

.pagination-ellipsis {
    @apply px-4 py-2 border border-gray-300 bg-white text-gray-700;
}
</style>
